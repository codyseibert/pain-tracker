!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("hyperapp")):"function"==typeof define&&define.amd?define(["exports","hyperapp"],t):t(e["Hyperapp-slider"]={},null)}(this,function(e,t){"use strict";var n=window.document,i=null,o=null,u=function(e){n.removeEventListener("mousemove",i),n.removeEventListener("mouseup",o)},s=function(e){return t.h("div",{class:e.cls+"__handle",tabIndex:"0",style:{position:"absolute",left:e.value+"px"},onmousedown:function(e,t){return function(s){i=function(e){return function(t){e(t.movementX)}}(e),o=u,n.addEventListener("mousemove",i),n.addEventListener("mouseup",o),t()}}(e.setMovementX,e.setInitialMousePosition)})},a=function(e){var n=e.setWidth;return t.h("div",{oncreate:function(e){return n(e.getBoundingClientRect().width)},class:e.cls+"__track"})},r=function(e){return t.h("div",{class:e.cls+"__fill",style:{position:"absolute",left:0,width:e.value+"px"}})},m=Math.min,l=Math.max,d=Math.abs,v=Math.round;function c(e){var n=e.baseClass,i=e.state,o=e.actions,u=void 0!==n?n:"slider";return t.h("div",{class:u,role:"slider","aria-valuemin":i.min,"aria-valuemax":i.max,"aria-valuenow":i.value},t.h(a,{cls:u,setWidth:o.setDomWidth}),t.h(r,{cls:u,value:i.dom.value}),t.h(s,{cls:u,min:i.min,max:i.max,value:i.dom.value,setMovementX:o.setMovementX,setInitialMousePosition:o.dom.setInitialMousePosition}))}c.state=function(e){return{min:e.min,max:e.max,value:e.value,step:e.step||1,dom:{width:0,value:0,mousePosition:0}}},c.actions={setValue:function(e){return function(t){return{value:e}}},setMovementX:function(e){return function(t,n){var i=t.dom.mousePosition+e;n.dom.setMousePosition(i);var o=l(t.min,m(t.max,t.min+i/t.dom.width*(t.max-t.min)));if("any"===t.step){var u=(o-t.min)/(t.max-t.min)*t.dom.width;return n.setValue(o),void n.dom.setValue(u)}var s=o-t.value;if(d(s)>=t.step/2){var a=t.step*v(s/t.step),r=t.value+a,c=(r-t.min)/(t.max-t.min)*t.dom.width;t.min>r||r>t.max||(n.setValue(r),n.dom.setValue(c))}}},setDomWidth:function(e){return function(t,n){var i=(t.value-t.min)/(t.max-t.min)*e;n.dom.setWidth(e),n.dom.setValue(i)}},dom:{setWidth:function(e){return function(t){return{width:e}}},setValue:function(e){return function(t){return{value:e}}},setInitialMousePosition:function(){return function(e){return{mousePosition:e.value}}},setMousePosition:function(e){return function(t){return{mousePosition:e}}}}},e.Slider=c,Object.defineProperty(e,"__esModule",{value:!0})});
